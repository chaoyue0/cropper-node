# cropper-node
## 目录结构
- controllers: 控制器文件夹，用于处理业务逻辑和请求响应
- db：数据库配置和模型文件夹
- middleware：中间件文件夹，用于处理请求前后的操作
- routes：请求路由管理
- utils：工具函数

## 需求分析
目标群体：学生、求职者、考试报名人群、各类证件用户

核心功能：证件照裁剪、背景色替换（红、白、蓝）、尺寸模板、下载保存、高清导出

### 照片模块
- 用户上传照片
- 查询用户上传的照片列表
- 删除已上传的照片
## 系统设计
### 数据库设计
- 用户表：用户id、用户姓名、注册时间、金币数
- 原始图片表：照片id、用户id、图片名、存储路径、图片大小、图片宽、图片高、上传时间、是否为临时文件
- 照片版本表：版本id、用户id、照片id、背景色、处理后的存储路径、裁剪参数、创建时间
- 尺寸模板表：模板id、模板名称、宽度、高度、用途说明、是否免费
- 订单表：订单号、用户id、订单类型、支付金币数量、状态、创建时间、支付时间
- 下载记录表：日志id、用户id、版本id、下载时间、用户id地址

## 依赖说明
因json格式天然不能注释，且npm体系内目前没有优雅解，需要以文档形式标注。
每增加一个依赖，要说明其作用，选择依据，版本要求和注意事项，以方便升级和维护。 
依赖的版本，建议固定具体版本，至少固定小版本，主要考虑到npm社区的脆弱性

### 运行依赖 Dependencies

- express： Node框架，主要用于构建Web服务器和处理http请求、响应
- superagent：HTTP客户端库，专门用于发起http请求
- pug：模板引擎，允许我们向视图添加数据，并动态生成HTML
- mysql：对node环境中MongoDB数据库操作的封装，一个对象模型工具
- multer: node中间件，处理multipart/form-data表单数据，可存储文件在本地磁盘或内存中，主要用于上传文件


### 编译依赖 DevDependencies

- nodemon：检测工作区代码的变化，并自动重启
